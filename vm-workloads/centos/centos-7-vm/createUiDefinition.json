{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/uiDefinition.json#",
    "handler": "Microsoft.Azure.CreateUIDef",
    "version": "1.0.0",
    "parameters": {
      "basics": [],
      "steps": [
        {
          "name": "networkSettings",
          "label": "Network Settings",
          "elements": [
            {
              "name": "virtualNetwork",
              "type": "Microsoft.Network.VirtualNetworkCombo",
              "label": "Virtual Network",
              "toolTip": "Select an existing virtual network",
              "constraints": {
                "required": true
              },
              "options": {
                "hideNew": true
              }
            },
            {
              "name": "subnet",
              "type": "Microsoft.Network.SubnetCombo",
              "label": "Subnet",
              "toolTip": "Select a subnet from the selected virtual network",
              "constraints": {
                "required": true
              },
              "dependsOn": [
                "virtualNetwork"
              ]
            },
            {
              "name": "networkSecurityGroup",
              "type": "Microsoft.Common.ResourceSelector",
              "label": "Network Security Group",
              "toolTip": "Select an existing Network Security Group",
              "resourceType": "Microsoft.Network/networkSecurityGroups",
              "constraints": {
                "required": true
              }
            },
            {
              "name": "publicIpAddress",
              "type": "Microsoft.Common.ResourceSelector",
              "label": "Public IP Address",
              "toolTip": "Select an existing Public IP Address",
              "resourceType": "Microsoft.Network/publicIPAddresses",
              "constraints": {
                "required": true
              }
            }
          ]
        },
        {
          "name": "storageSettings",
          "label": "Storage Settings",
          "elements": [
            {
              "name": "osDisk",
              "type": "Microsoft.Common.ResourceSelector",
              "label": "OS Disk",
              "toolTip": "Select an existing OS Disk",
              "resourceType": "Microsoft.Compute/disks",
              "constraints": {
                "required": true
              }
            }
          ]
        }
      ],
      "outputs": {
        "virtualNetwork": "[steps('networkSettings').virtualNetwork]",
        "subnet": "[steps('networkSettings').subnet]",
        "networkSecurityGroup": "[steps('networkSettings').networkSecurityGroup]",
        "publicIpAddress": "[steps('networkSettings').publicIpAddress]",
        "osDisk": "[steps('storageSettings').osDisk]"
      }
    }
  }
  