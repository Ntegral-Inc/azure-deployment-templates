{
    "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#",
    "handler": "Microsoft.Azure.CreateUIDef",
    "version": "0.1.2-preview",
    "parameters": {
      "basics": [],
      "steps": [
        {
          "name": "networkSettings",
          "label": "Network Settings",
          "elements": [
            {
              "name": "virtualNetwork",
              "type": "Microsoft.Network.VirtualNetworkCombo",
              "label": {
                "virtualNetwork": "Virtual Network",
                "subnets": "Subnet"
              },
              "toolTip": {
                "virtualNetwork": "Select an existing virtual network",
                "subnets": "Select a subnet within the selected virtual network"
              },
              "constraints": {
                "required": true
              }
            },
            {
              "name": "networkSecurityGroup",
              "type": "Microsoft.Common.ResourceSelector",
              "label": "Network Security Group",
              "toolTip": "Select an existing Network Security Group",
              "resourceType": "Microsoft.Network/networkSecurityGroups",
              "constraints": {
                "required": true
              }
            },
            {
              "name": "publicIpAddress",
              "type": "Microsoft.Common.ResourceSelector",
              "label": "Public IP Address",
              "toolTip": "Select an existing Public IP Address",
              "resourceType": "Microsoft.Network/publicIPAddresses",
              "constraints": {
                "required": true
              }
            },
            {
              "name": "osDisk",
              "type": "Microsoft.Common.ResourceSelector",
              "label": "OS Disk",
              "toolTip": "Select an existing managed OS Disk",
              "resourceType": "Microsoft.Compute/disks",
              "constraints": {
                "required": true
              }
            }
          ]
        }
      ],
      "outputs": {
        "virtualNetwork": "[steps('networkSettings').virtualNetwork]",
        "subnet": "[steps('networkSettings').subnets]",
        "networkSecurityGroup": "[steps('networkSettings').networkSecurityGroup]",
        "publicIpAddress": "[steps('networkSettings').publicIpAddress]",
        "osDisk": "[steps('networkSettings').osDisk]"
      }
    }
  }
  